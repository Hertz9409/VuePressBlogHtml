<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ArcGIS Task | Hertz&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Hertz's Blog By VuePress">
    
    <link rel="preload" href="/VuePressBlogHtml/assets/css/0.styles.7994d51b.css" as="style"><link rel="preload" href="/VuePressBlogHtml/assets/js/app.a22e24ce.js" as="script"><link rel="preload" href="/VuePressBlogHtml/assets/js/2.273354d5.js" as="script"><link rel="preload" href="/VuePressBlogHtml/assets/js/16.e98dda23.js" as="script"><link rel="preload" href="/VuePressBlogHtml/assets/js/17.398b5375.js" as="script"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/10.2906bcb7.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/11.44da5627.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/12.603be071.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/13.bbb59baa.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/14.37104393.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/15.622f6d38.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/18.87fb9473.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/19.35af09b5.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/20.0860f27f.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/21.80170eb6.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/22.32e3b412.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/23.71a3bc07.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/24.92a37d9c.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/25.6c06b0ec.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/26.56de950a.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/27.389f6e4c.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/28.93cf295c.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/29.8299c662.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/3.82a8b2ed.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/30.030ded92.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/31.37328e23.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/32.33720530.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/33.dbf791bd.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/34.3f59d278.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/35.4db82d0c.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/36.993714ab.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/37.d14d1abc.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/38.5d2531bd.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/39.04716fa1.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/4.89240616.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/40.af165ce2.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/41.be41ee81.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/42.9d0cef92.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/43.d679c459.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/44.d12455da.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/45.50996042.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/46.4ae0dc93.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/47.297e0925.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/48.0b5098bb.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/49.2331b452.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/5.7f54006c.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/50.ed621c31.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/51.ffa15a18.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/52.f023092e.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/53.dcf36f26.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/54.d2f28937.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/55.8d4c4343.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/56.bf7841ef.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/57.0cf87538.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/58.a33d519a.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/59.100761af.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/6.583fbbc7.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/60.2547a25b.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/61.0a622c79.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/62.8bdae0f0.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/63.ae32cec9.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/64.3f841214.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/65.9967bc83.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/66.2b33b58e.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/67.5183b069.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/68.ac765712.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/69.278cdc53.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/7.d3e576f7.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/70.1f5428d0.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/71.44ee8fdb.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/72.4c087926.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/73.2c3e7645.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/74.e2a67ac9.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/8.d70fcbe5.js"><link rel="prefetch" href="/VuePressBlogHtml/assets/js/9.59956eee.js">
    <link rel="stylesheet" href="/VuePressBlogHtml/assets/css/0.styles.7994d51b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/VuePressBlogHtml/" class="home-link router-link-active"><!----> <span class="site-name">Hertz's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/VuePressBlogHtml/FrontEnd/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/VuePressBlogHtml/BackEnd/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/VuePressBlogHtml/GIS/" class="nav-link router-link-active">
  GIS
</a></div><div class="nav-item"><a href="/VuePressBlogHtml/Others/" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="https://github.com/Hertz9409" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/VuePressBlogHtml/FrontEnd/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/VuePressBlogHtml/BackEnd/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/VuePressBlogHtml/GIS/" class="nav-link router-link-active">
  GIS
</a></div><div class="nav-item"><a href="/VuePressBlogHtml/Others/" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="https://github.com/Hertz9409" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/VuePressBlogHtml/GIS/ArcGIS%20Tasks/" aria-current="page" class="active sidebar-link">ArcGIS Tasks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/VuePressBlogHtml/GIS/ArcGIS%20Tasks/#背景介绍" class="sidebar-link">背景介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/VuePressBlogHtml/GIS/ArcGIS%20Tasks/#地图服务元数据信息" class="sidebar-link">地图服务元数据信息</a></li></ul></li><li class="sidebar-sub-header"><a href="/VuePressBlogHtml/GIS/ArcGIS%20Tasks/#三大查询的对比" class="sidebar-link">三大查询的对比</a></li><li class="sidebar-sub-header"><a href="/VuePressBlogHtml/GIS/ArcGIS%20Tasks/#querytask-query" class="sidebar-link">QueryTask](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-QueryTask.html), [Query</a></li><li class="sidebar-sub-header"><a href="/VuePressBlogHtml/GIS/ArcGIS%20Tasks/#identifytask-identifyparameters" class="sidebar-link">IdentifyTask](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-IdentifyTask.html), [IdentifyParameters</a></li><li class="sidebar-sub-header"><a href="/VuePressBlogHtml/GIS/ArcGIS%20Tasks/#findtask-findparameters" class="sidebar-link">FindTask](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-FindTask.html), [FindParameters</a></li><li class="sidebar-sub-header"><a href="/VuePressBlogHtml/GIS/ArcGIS%20Tasks/#printtask" class="sidebar-link">PrintTask</a></li><li class="sidebar-sub-header"><a href="/VuePressBlogHtml/GIS/ArcGIS%20Tasks/#soe-server-object-extensions" class="sidebar-link">SOE -- server object extensions</a></li><li class="sidebar-sub-header"><a href="/VuePressBlogHtml/GIS/ArcGIS%20Tasks/#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/VuePressBlogHtml/GIS/%E8%B6%85%E5%9B%BE%E6%9C%8D%E5%8A%A1/" class="sidebar-link">超图服务</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="arcgis-task"><a href="#arcgis-task" class="header-anchor">#</a> ArcGIS Task</h1> <h2 id="背景介绍"><a href="#背景介绍" class="header-anchor">#</a> 背景介绍</h2> <p>WebGIS前端开发的核心能力就是实现<code>数据展示(map,layer)</code>,<code>查询(三大查询)</code>和<code>简单分析(soe,geometryService)</code>.其中分析功能在有计算后台参与的情况下,可以交给后台通过开发SOE插件或WebAPI接口来实现,查询功能是我们前端WebGIS开发最常使用的API,在没有后台可依赖的情况下,前端要想实现服务信息的统计分析,依赖于对查询功能的灵活使用.</p> <h3 id="地图服务元数据信息"><a href="#地图服务元数据信息" class="header-anchor">#</a> 地图服务元数据信息</h3> <table><thead><tr><th>属性名称</th> <th>属性含义</th></tr></thead> <tbody><tr><td>Spatial Reference</td> <td>地图服务坐标系,图层坐标系</td></tr> <tr><td>Initial Extent</td> <td>地图初始化范围</td></tr> <tr><td>Full Extent</td> <td>地图全图范围</td></tr> <tr><td>Units</td> <td>地图数据单位</td></tr> <tr><td>Supported Image Format Types</td> <td>地图支持输出的图像格式</td></tr> <tr><td>Supports Dynamic Layers</td> <td>支持动态修改地图图层顺序和渲染</td></tr> <tr><td>MaxRecordCount</td> <td>查询一次支持最大输出要素的个数</td></tr> <tr><td>MaxImageHeight</td> <td>一次请求输出的图片最大像素高度</td></tr> <tr><td>MaxImageWidth</td> <td>一次请求输出的图片最大像素宽度</td></tr> <tr><td>Min Scale, Max Scale</td> <td>限制比例尺,地图服务仅在此比例尺范围内可见</td></tr> <tr><td>Display Field</td> <td>图层默认展示字段</td></tr> <tr><td>Type</td> <td>图层类型</td></tr> <tr><td>Geometry Type</td> <td>图层要素类型</td></tr> <tr><td>Default Visibility</td> <td>图层是否默认可见</td></tr> <tr><td>Supports Statistics</td> <td>是否支持统计查询</td></tr> <tr><td>Extent</td> <td>图层数据范围</td></tr> <tr><td>Drawing Info</td> <td>图层配图信息</td></tr> <tr><td>Fields</td> <td>图层属性字段名称,别名,类型</td></tr></tbody></table> <h2 id="三大查询的对比"><a href="#三大查询的对比" class="header-anchor">#</a> 三大查询的对比</h2> <table><thead><tr><th>API</th> <th>说明</th> <th>特点</th> <th>使用场景</th></tr></thead> <tbody><tr><td>QueryTask</td> <td>对图层进行空间和属性查询的功能类</td> <td>查询某个地图服务的某个子图层,空间查询的地图服务不必加载到Map中,返回FeatureSet结果,其中包含Graphic对象,其中属性字段key值为属性名称</td> <td>基础查询类型,前端进行数据查询时基本都是使用此类</td></tr> <tr><td>IdentifyTask</td> <td>对服务空间查询功能类</td> <td>查询一个服务的多个图层,空间查询,返回IdentifyResults数组,其中包含Graphic对象,其中属性字段key值为属性别名</td> <td>系统中的属性查询功能使用此类</td></tr> <tr><td>FindTask</td> <td>对服务属性查询功能类</td> <td>查询一个地图服务的多个图层的多个字段,不能进行空间查询,返回FindResults数组,其中包含Graphic对象,其中属性字段key值为属性别名</td> <td>当实现地块查询,定位查询时,可使用此类</td></tr></tbody></table> <h2 id="querytask-query"><a href="#querytask-query" class="header-anchor">#</a> <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-QueryTask.html" target="_blank" rel="noopener noreferrer">QueryTask<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html" target="_blank" rel="noopener noreferrer">Query<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>参数说明:</p> <ul><li>Where  <code>查询过滤SQL语句,如: 1=1, OBJECTID &gt; 10, OBJECTID like '%11'</code></li> <li>Text  <code>模糊查询的值,查询字段为&quot;Display Field&quot;</code></li> <li>Object IDs  <code>ObjectID数组,返回结果从其中挑选</code></li> <li>Input Geometry  <code>查询范围</code></li> <li>Geometry Type  <code>输入范围类型:&quot;Envelope&quot;, &quot;Point&quot;, &quot;Polyline&quot;, &quot;Polygon&quot;, &quot;MultiPoint&quot;</code></li> <li>Input Spatial Reference  <code>输入图形坐标系</code></li> <li>Spatial Relationship  <code>定义输入范围与输出结果间的空间关系:&quot;intersects&quot;,&quot;contains&quot;,&quot;crosses&quot;,&quot;disjoint&quot;,&quot;envelope-intersects&quot;,&quot;index-intersects&quot;,&quot;overlaps&quot;,&quot;touches&quot;,&quot;within&quot;,&quot;relation&quot;</code></li> <li>Relation  <code>高级空间关系,使用DE-9IM九交模型矩阵表示</code></li> <li>Out Fields  <code>输出结果包含的属性字段数组,一般输入[*]表示返回所有字段</code></li> <li>Return Geometry  <code>是否返回geometry图形信息,图形信息还和发布的服务是否勾选携带图形信息(SHAPE)有关</code></li> <li>Geometry Precision  <code>返回的图形的坐标点小数位数</code></li> <li>Output Spatial Reference  <code>返回的几何图形的空间参考系</code></li> <li>Return IDs Only  <code>只返回ObjectID, 设置此参数可突破ArcGIS服务的MaxRecordCount配置</code></li> <li>Return Count Only  <code>只返回查询结果总数</code></li> <li>Order By Fields  <code>返回结果排序字段,数组可设置多个,字段后添加ASC或DESC可设置升序降序</code></li> <li>Group By Fields (For Statistics)</li> <li>Output Statistics  <code>高级统计查询,按照配置规则,对查询结果进行统计,</code><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#statistic" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Return Distinct Values  <code>是否返回不同的值,此参数要求Out Fields为一个字段</code></li> <li>Format  <code>返回结果格式,一般使用json</code></li></ul> <p>返回结果:</p> <p><img src="/VuePressBlogHtml/assets/img/1.556d1d2b.png" alt="query查询返回结果"></p> <h2 id="identifytask-identifyparameters"><a href="#identifytask-identifyparameters" class="header-anchor">#</a> <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-IdentifyTask.html" target="_blank" rel="noopener noreferrer">IdentifyTask<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-IdentifyParameters.html" target="_blank" rel="noopener noreferrer">IdentifyParameters<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>参数说明:</p> <ul><li>Geometry  <code>输入的查询范围</code></li> <li>Geometry Type  <code>输入范围类型:&quot;Envelope&quot;, &quot;Point&quot;, &quot;Polyline&quot;, &quot;Polygon&quot;</code></li> <li>Spatial Reference  <code>输入输出以及Map Extent的空间坐标系</code></li> <li>Layers  <code>执行查询的图层数组</code></li> <li>Layer Definitions  <code>图层过滤参数,格式和地图过滤参数一致(数组-sql)</code></li> <li>Tolerance  <code>屏幕像素与查询范围间的距离,即容差</code></li> <li>Map Extent  <code>当前查询操作的地图显示范围</code></li> <li>Image Display  <code>图像长宽和dpi(1969,1062,96),此参数由arcgis api自动计算,如果我们手动进行rest请求,需要主动赋值</code></li> <li>Return Geometry  <code>返回结果是否带有几何图形</code></li> <li>Geometry Precision  <code>返回的图形的坐标点小数位数</code></li> <li>Format  <code>返回结果格式,一般使用json</code></li> <li>returnFieldName  <code>ArcGIS Server10.5新增属性,表示返回属性字段key是否为字段别名</code></li> <li>returnUnformattedValues   <code>ArcGIS Server10.5新增属性,表示返回属性字段value值是否经过格式化,如时间字段等</code></li></ul> <p>返回结果:</p> <p><img src="/VuePressBlogHtml/assets/img/2.93b729e3.png" alt="identify查询返回结果"></p> <h2 id="findtask-findparameters"><a href="#findtask-findparameters" class="header-anchor">#</a> <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-FindTask.html" target="_blank" rel="noopener noreferrer">FindTask<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-FindParameters.html" target="_blank" rel="noopener noreferrer">FindParameters<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>参数说明:</p> <ul><li>Search Text  <code>搜索文本</code></li> <li>Contains  <code>是否精确匹配文本</code></li> <li>Search Fields  <code>搜索字段数组</code></li> <li>Spatial Reference  <code>返回结果空间坐标系</code></li> <li>Layers  <code>搜索图层数组</code></li> <li>Layer Definitions  <code>搜索图层过滤条件</code></li> <li>Return Geometry  <code>是否返回图形信息</code></li> <li>Geometry Precision  <code>返回的图形的坐标点小数位数</code></li> <li>Format  <code>返回结果格式,一般使用json</code></li></ul> <p>返回结果:</p> <p><img src="/VuePressBlogHtml/assets/img/3.b19a01fe.png" alt="find查询返回结果"></p> <h2 id="printtask"><a href="#printtask" class="header-anchor">#</a> <a href="http://52.82.98.186:6080/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task" target="_blank" rel="noopener noreferrer">PrintTask<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>ArcGIS Server自带一个地图打印服务,通过这个服务,我们可以实现地图数据的高清打印.</p> <p>优点:</p> <ul><li>使用地图打印服务,可以实现数据的高清打印,dpi可手动设置</li> <li>代码逻辑简单,服务器性能好,效率高</li></ul> <p>缺点:</p> <ul><li>需要预先使用ArcGIS Desktop制作地图出图模板,对实施人员水平有一定要求</li> <li>预留参数和制图元素较少,不能实现各种个性化出图(只有标题,作者,版权,图例,比例尺,指北针等制图组件)</li> <li>一些丰富的专题图输出不能实现</li></ul> <p>目前前端实现界面出图功能都是通过canvas实现的,在ArcGIS的3.xAPI中,地图数据通过img节点渲染,此时使用canvas时会存在跨域问题,我们也经过多次探索,勉强解决了问题.</p> <p>现在的4.xAPI中,地图数据完全渲染在canvas中,前端天然就支持直接进行图片导出,所以MapView的类中能够直接提供takeScreenshot方法来实现地图截图导出.</p> <p>并且OpenLayer等开源WebGIS平台也使用canvas渲染地图,在这样的大背景下,我们基本不再使用PrintTask来实现地图导出,而是前端直接使用canvas导出,这样做不仅可以快速导出,而且可以实现更多丰富的效果.</p> <h2 id="soe-server-object-extensions"><a href="#soe-server-object-extensions" class="header-anchor">#</a> <a href="https://developers.arcgis.com/rest/services-reference/service-extension.htm" target="_blank" rel="noopener noreferrer">SOE -- server object extensions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>SOE服务是ArcGIS Server服务的扩展,旨在将ArcGIS Desktop强大的分析能力带到服务中来,从而实现web端的实时分析.目前SOE服务由计算团队开发维护,以rest服务接口的形式展现.</p> <p>当前端查询分析能力存在瓶颈或者效率低下时,可借助服务器强大的性能以及可以直接读取空间数据库表的能力,利用SOE服务来实现数据分析.</p> <p>SOE服务在实践过程中也发现一些问题,如假死,只能挂载在一个服务上并只能读取挂载的服务的数据等</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>本节主要介绍了ArcGIS中的三大查询,地图打印服务和SOE服务,其中地图打印服务已很少使用,SOE服务就是普通的REST服务接口,直接ajax调用就可以.主要是三大查询,要理解各自的特点以及使用场景,在具体的业务中可以灵活选用.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/30/2020, 6:43:55 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/VuePressBlogHtml/assets/js/app.a22e24ce.js" defer></script><script src="/VuePressBlogHtml/assets/js/2.273354d5.js" defer></script><script src="/VuePressBlogHtml/assets/js/16.e98dda23.js" defer></script><script src="/VuePressBlogHtml/assets/js/17.398b5375.js" defer></script>
  </body>
</html>
